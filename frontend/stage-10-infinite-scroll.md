# Ğ­Ñ‚Ğ°Ğ¿ 10: Ğ‘ĞµÑĞºĞ¾Ğ½ĞµÑ‡Ğ½Ñ‹Ğ¹ ÑĞºÑ€Ğ¾Ğ»Ğ» (Infinite Scroll) SnapBoard

## ğŸ¯ Ğ¦ĞµĞ»ÑŒ ÑÑ‚Ğ°Ğ¿Ğ°
Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ Ğ±ĞµÑĞºĞ¾Ğ½ĞµÑ‡Ğ½Ğ¾Ğ³Ğ¾ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğ° Ğ´Ğ»Ñ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğ³Ğ¾ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼ Intersection Observer API, Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¸ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğ¹ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸.

---

## ğŸ“‹ Ğ§ĞµĞºĞ»Ğ¸ÑÑ‚ ÑÑ‚Ğ°Ğ¿Ğ°
- [ ] Ğ¢Ğ¸Ğ¿Ñ‹ Ğ´Ğ»Ñ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸
- [ ] Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ store Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ Ğ´Ğ»Ñ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸
- [ ] Composable useInfiniteScroll
- [ ] ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ Sentinel (Ñ‚Ñ€Ğ¸Ğ³Ğ³ĞµÑ€ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸)
- [ ] ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ LoadMore (Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ğ¸ ĞºĞ¾Ğ½ĞµÑ† ÑĞ¿Ğ¸ÑĞºĞ°)
- [ ] Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¼Ğ¸ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°Ğ¼Ğ¸
- [ ] Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ¾Ğ¼ Ğ¸ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ğ¼Ğ¸
- [ ] ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº Ğ¸ retry
- [ ] ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸

---

## ğŸ—‚ï¸ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### Ğ¤Ğ°Ğ¹Ğ»: `types/pagination.ts`

```typescript
/**
 * Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸
 */
export interface PaginationState {
  page: number
  pageSize: number
  hasMore: boolean
  isLoading: boolean
  error: string | null
}

/**
 * ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ° ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹
 */
export interface PageRequest {
  page: number
  pageSize: number
  boardId?: string
  query?: string
  tags?: string[]
  sortBy?: string
}

/**
 * ĞÑ‚Ğ²ĞµÑ‚ Ñ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸
 */
export interface PaginatedResponse<T> {
  items: T[]
  page: number
  pageSize: number
  totalItems: number
  totalPages: number
  hasMore: boolean
}

/**
 * ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Infinite Scroll
 */
export interface InfiniteScrollConfig {
  pageSize?: number
  threshold?: number  // Ğ¿Ğ¸ĞºÑĞµĞ»Ğ¸ Ğ´Ğ¾ sentinel Ğ´Ğ»Ñ Ñ‚Ñ€Ğ¸Ğ³Ğ³ĞµÑ€Ğ° Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸
  initialLoad?: boolean
}

/**
 * Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ
 */
export const DEFAULT_INFINITE_SCROLL_CONFIG: InfiniteScrollConfig = {
  pageSize: 12,
  threshold: 100,
  initialLoad: true
}

/**
 * Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸
 */
export type LoadingState = 'idle' | 'loading' | 'error' | 'end'
```

---

## 1ï¸âƒ£ Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ Store Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹

### ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ„Ğ°Ğ¹Ğ»Ğ°: `store/images.ts`

```typescript
import { defineStore } from 'pinia'
import { ref, computed } from 'vue'
import type { 
  Image, 
  UpdateImageDto,
  UploadQueueItem
} from '~/types/image'
import type { 
  PaginationState, 
  PageRequest, 
  PaginatedResponse 
} from '~/types/pagination'
import { 
  generateUploadId, 
  createFilePreview,
  validateFile,
  validateImageUrl,
  DEFAULT_UPLOAD_CONFIG 
} from '~/utils/fileHelpers'

export const useImagesStore = defineStore('images', () => {
  // Ğ¡ÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹ State
  const images = ref<Image[]>([])
  const uploadQueue = ref<UploadQueueItem[]>([])
  const isLoading = ref(false)
  const error = ref<string | null>(null)

  // ĞĞ¾Ğ²Ñ‹Ğ¹ State Ğ´Ğ»Ñ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸
  const pagination = ref<PaginationState>({
    page: 1,
    pageSize: 12,
    hasMore: true,
    isLoading: false,
    error: null
  })

  // Ğ¡ÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ Getters
  const imagesByBoard = computed(() => (boardId: string) =>
    images.value.filter(img => img.boardId === boardId)
  )

  // ... Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ getters ...

  // ĞĞ¾Ğ²Ñ‹Ğµ Getters Ğ´Ğ»Ñ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸
  const paginationState = computed(() => pagination.value)
  
  const canLoadMore = computed(() => 
    pagination.value.hasMore && !pagination.value.isLoading
  )

  // ĞĞ¾Ğ²Ñ‹Ğµ Actions Ğ´Ğ»Ñ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸

  /**
   * Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹
   */
  const fetchPagedImages = async (request: PageRequest): Promise<PaginatedResponse<Image>> => {
    pagination.value.isLoading = true
    pagination.value.error = null

    try {
      // Ğ˜Ğ¼Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ API Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°
      await new Promise(resolve => setTimeout(resolve, 800))
      
      const response = getMockPagedImages(request)
      
      return response
    } catch (e) {
      const errorMessage = 'ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ'
      pagination.value.error = errorMessage
      throw new Error(errorMessage)
    } finally {
      pagination.value.isLoading = false
    }
  }

  /**
   * Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ Ğº ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞ¼Ñƒ ÑĞ¿Ğ¸ÑĞºÑƒ
   */
  const appendImages = (newImages: Image[]) => {
    images.value = [...images.value, ...newImages]
  }

  /**
   * Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ (Ğ·Ğ°Ğ¼ĞµĞ½Ğ°)
   */
  const setImages = (newImages: Image[]) => {
    images.value = newImages
  }

  /**
   * Ğ¡Ğ±Ñ€Ğ¾Ñ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸
   */
  const resetPagination = () => {
    pagination.value = {
      page: 1,
      pageSize: 12,
      hasMore: true,
      isLoading: false,
      error: null
    }
    images.value = []
  }

  /**
   * ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸
   */
  const updatePagination = (updates: Partial<PaginationState>) => {
    pagination.value = { ...pagination.value, ...updates }
  }

  /**
   * Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸
   */
  const setPaginationError = (errorMessage: string | null) => {
    pagination.value.error = errorMessage
  }

  // ... ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ actions ...

  return {
    // Ğ¡ÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ exports
    images,
    uploadQueue,
    isLoading,
    error,
    imagesByBoard,
    // ... Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ exports ...
    
    // ĞĞ¾Ğ²Ñ‹Ğµ exports Ğ´Ğ»Ñ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸
    pagination,
    paginationState,
    canLoadMore,
    fetchPagedImages,
    appendImages,
    setImages,
    resetPagination,
    updatePagination,
    setPaginationError
  }
})

/**
 * Mock Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹
 */
function getMockPagedImages(request: PageRequest): PaginatedResponse<Image> {
  const { page, pageSize, boardId } = request
  
  // Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµĞ¼ mock Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
  const allImages = generateMockImages(boardId || 'default', 50)
  
  const startIndex = (page - 1) * pageSize
  const endIndex = startIndex + pageSize
  const pageImages = allImages.slice(startIndex, endIndex)
  
  return {
    items: pageImages,
    page,
    pageSize,
    totalItems: allImages.length,
    totalPages: Math.ceil(allImages.length / pageSize),
    hasMore: endIndex < allImages.length
  }
}

/**
 * Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ mock Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹
 */
function generateMockImages(boardId: string, count: number): Image[] {
  const tags = ['Ğ¿Ñ€Ğ¸Ñ€Ğ¾Ğ´Ğ°', 'Ğ³Ğ¾Ñ€Ğ¾Ğ´', 'Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°', 'Ğ¿Ğ¾Ñ€Ñ‚Ñ€ĞµÑ‚', 'ĞµĞ´Ğ°', 'Ğ¿ÑƒÑ‚ĞµÑˆĞµÑÑ‚Ğ²Ğ¸Ñ', 'Ğ¸ÑĞºÑƒÑÑÑ‚Ğ²Ğ¾', 'Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸']
  const images: Image[] = []
  
  for (let i = 1; i <= count; i++) {
    const width = 300 + Math.floor(Math.random() * 200)
    const height = 300 + Math.floor(Math.random() * 300)
    
    images.push({
      id: `img-${boardId}-${i}`,
      url: `https://picsum.photos/seed/${boardId}-${i}/${width}/${height}`,
      title: `Ğ˜Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ ${i}`,
      description: `ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ ${i}`,
      boardId,
      userId: 'current-user',
      tags: [
        tags[Math.floor(Math.random() * tags.length)] || 'Ğ¿Ñ€Ğ¸Ñ€Ğ¾Ğ´Ğ°',
        tags[Math.floor(Math.random() * tags.length)] || 'Ğ³Ğ¾Ñ€Ğ¾Ğ´'
      ],
      createdAt: new Date(Date.now() - i * 86400000).toISOString()
    })
  }
  
  return images
}
```

---

## 2ï¸âƒ£ Composable Ğ´Ğ»Ñ Ğ±ĞµÑĞºĞ¾Ğ½ĞµÑ‡Ğ½Ğ¾Ğ³Ğ¾ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğ°

### Ğ¤Ğ°Ğ¹Ğ»: `composables/useInfiniteScroll.ts`

```typescript
import { ref, computed, watch, onMounted, onUnmounted, type Ref, type ComputedRef } from 'vue'
import { storeToRefs } from 'pinia'
import { useImagesStore } from '~/store/images'
import { useSearchStore } from '~/store/search'
import type { Image } from '~/types/image'
import type { InfiniteScrollConfig, LoadingState, PageRequest } from '~/types/pagination'
import { DEFAULT_INFINITE_SCROLL_CONFIG } from '~/types/pagination'

interface UseInfiniteScrollOptions {
  boardId: string
  config?: InfiniteScrollConfig
}

interface UseInfiniteScrollReturn {
  // State
  items: ComputedRef<Image[]>
  isLoading: Ref<boolean>
  hasMore: Ref<boolean>
  error: Ref<string | null>
  page: Ref<number>
  loadingState: ComputedRef<LoadingState>
  
  // Actions
  loadMore: () => Promise<void>
  reset: () => Promise<void>
  retry: () => Promise<void>
  
  // Observer
  sentinelRef: Ref<HTMLElement | null>
  observerActive: Ref<boolean>
}

/**
 * Composable Ğ´Ğ»Ñ Ğ±ĞµÑĞºĞ¾Ğ½ĞµÑ‡Ğ½Ğ¾Ğ³Ğ¾ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğ°
 */
export function useInfiniteScroll(options: UseInfiniteScrollOptions): UseInfiniteScrollReturn {
  const { boardId, config = {} } = options
  const mergedConfig = { ...DEFAULT_INFINITE_SCROLL_CONFIG, ...config }
  
  const imagesStore = useImagesStore()
  const searchStore = useSearchStore()
  
  const { pagination, images } = storeToRefs(imagesStore)
  const { query, selectedTags, sortBy } = storeToRefs(searchStore)
  
  // Refs
  const sentinelRef = ref<HTMLElement | null>(null)
  const observerActive = ref(true)
  const observer = ref<IntersectionObserver | null>(null)
  
  // Computed
  const items = computed(() => images.value)
  const isLoading = computed(() => pagination.value.isLoading)
  const hasMore = computed(() => pagination.value.hasMore)
  const error = computed(() => pagination.value.error)
  const page = computed(() => pagination.value.page)
  
  const loadingState = computed<LoadingState>(() => {
    if (pagination.value.isLoading) return 'loading'
    if (pagination.value.error) return 'error'
    if (!pagination.value.hasMore) return 'end'
    return 'idle'
  })

  /**
   * Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ° Ñ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¼Ğ¸ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ğ¼Ğ¸
   */
  const createPageRequest = (pageNum: number): PageRequest => ({
    page: pageNum,
    pageSize: mergedConfig.pageSize!,
    boardId,
    query: query.value || undefined,
    tags: selectedTags.value.length > 0 ? selectedTags.value : undefined,
    sortBy: sortBy.value
  })

  /**
   * Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ¹ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹
   */
  const loadMore = async (): Promise<void> => {
    // ĞŸÑ€ĞµĞ´Ğ¾Ñ‚Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµĞ¼ Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€ÑƒÑÑ‰Ğ¸Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹
    if (pagination.value.isLoading || !pagination.value.hasMore) {
      return
    }

    try {
      const request = createPageRequest(pagination.value.page)
      const response = await imagesStore.fetchPagedImages(request)
      
      // Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ½Ğ¾Ğ²Ñ‹Ğµ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ
      imagesStore.appendImages(response.items)
      
      // ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµĞ¼ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸
      imagesStore.updatePagination({
        page: pagination.value.page + 1,
        hasMore: response.hasMore
      })
      
      // ĞÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµĞ¼ observer ĞµÑĞ»Ğ¸ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ Ğ½ĞµÑ‚ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
      if (!response.hasMore) {
        stopObserver()
      }
    } catch (e) {
      console.error('Error loading more images:', e)
    }
  }

  /**
   * Ğ¡Ğ±Ñ€Ğ¾Ñ Ğ¸ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ñ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ°
   */
  const reset = async (): Promise<void> => {
    imagesStore.resetPagination()
    startObserver()
    
    if (mergedConfig.initialLoad) {
      await loadMore()
    }
  }

  /**
   * ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ°Ñ Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚ĞºĞ° Ğ¿Ğ¾ÑĞ»Ğµ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸
   */
  const retry = async (): Promise<void> => {
    imagesStore.setPaginationError(null)
    await loadMore()
  }

  /**
   * Callback Ğ´Ğ»Ñ Intersection Observer
   */
  const handleIntersection = (entries: IntersectionObserverEntry[]) => {
    const entry = entries[0]
    if (entry?.isIntersecting && observerActive.value) {
      loadMore()
    }
  }

  /**
   * Ğ—Ğ°Ğ¿ÑƒÑĞº observer
   */
  const startObserver = () => {
    if (!sentinelRef.value || observer.value) return
    
    observer.value = new IntersectionObserver(handleIntersection, {
      root: null,
      rootMargin: `${mergedConfig.threshold}px`,
      threshold: 0
    })
    
    observer.value.observe(sentinelRef.value)
    observerActive.value = true
  }

  /**
   * ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° observer
   */
  const stopObserver = () => {
    if (observer.value) {
      observer.value.disconnect()
      observer.value = null
    }
    observerActive.value = false
  }

  // Ğ¡Ğ»ĞµĞ´Ğ¸Ğ¼ Ğ·Ğ° Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸ÑĞ¼Ğ¸ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ²
  watch(
    [query, selectedTags, sortBy],
    () => {
      reset()
    },
    { deep: true }
  )

  // Ğ¡Ğ»ĞµĞ´Ğ¸Ğ¼ Ğ·Ğ° sentinel ref
  watch(sentinelRef, (newRef) => {
    if (newRef) {
      startObserver()
    } else {
      stopObserver()
    }
  })

  // Lifecycle
  onMounted(() => {
    if (mergedConfig.initialLoad) {
      loadMore()
    }
  })

  onUnmounted(() => {
    stopObserver()
  })

  return {
    // State
    items,
    isLoading,
    hasMore,
    error,
    page,
    loadingState,
    
    // Actions
    loadMore,
    reset,
    retry,
    
    // Observer
    sentinelRef,
    observerActive
  }
}
```

---

## 3ï¸âƒ£ ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ Sentinel

### Ğ¤Ğ°Ğ¹Ğ»: `components/infinite-scroll/Sentinel.vue`

```vue
<template>
  <div 
    ref="sentinelElement"
    class="infinite-scroll-sentinel"
    :class="{ 'infinite-scroll-sentinel--hidden': !active }"
  />
</template>

<script setup lang="ts">
import { ref, watch } from 'vue'

interface Props {
  active?: boolean
}

const props = withDefaults(defineProps<Props>(), {
  active: true
})

const sentinelElement = ref<HTMLElement | null>(null)

// Expose ref Ğ´Ğ»Ñ Ñ€Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒÑĞºĞ¾Ğ³Ğ¾ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ°
defineExpose({
  element: sentinelElement
})

// Emit ref Ğ¿Ñ€Ğ¸ Ğ¼Ğ¾Ğ½Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸
const emit = defineEmits<{
  'mounted': [element: HTMLElement | null]
}>()

watch(sentinelElement, (el) => {
  emit('mounted', el)
}, { immediate: true })
</script>

<style lang="sass" scoped>
.infinite-scroll-sentinel
  height: 1px
  width: 100%
  
  &--hidden
    display: none
</style>
```

---

## 4ï¸âƒ£ ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ LoadMore

### Ğ¤Ğ°Ğ¹Ğ»: `components/infinite-scroll/LoadMore.vue`

```vue
<template>
  <div class="load-more">
    <!-- Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ -->
    <div v-if="isLoading" class="load-more__loading">
      <div class="load-more__spinner"></div>
      <span class="load-more__text">Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹...</span>
    </div>
    
    <!-- Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ -->
    <div v-else-if="error" class="load-more__error">
      <div class="load-more__error-icon">âš ï¸</div>
      <span class="load-more__error-text">{{ error }}</span>
      <button 
        class="load-more__retry-btn"
        @click="$emit('retry')"
      >
        ğŸ”„ ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ñ‚ÑŒ
      </button>
    </div>
    
    <!-- ĞšĞ¾Ğ½ĞµÑ† ÑĞ¿Ğ¸ÑĞºĞ° -->
    <div v-else-if="!hasMore && itemCount > 0" class="load-more__end">
      <div class="load-more__end-line"></div>
      <span class="load-more__end-text">Ğ’ÑĞµ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ñ‹</span>
      <div class="load-more__end-line"></div>
    </div>
    
    <!-- Sentinel Ğ´Ğ»Ñ Intersection Observer -->
    <InfiniteScrollSentinel 
      v-if="hasMore && !error"
      :active="!isLoading"
      @mounted="handleSentinelMounted"
    />
  </div>
</template>

<script setup lang="ts">
interface Props {
  isLoading: boolean
  hasMore: boolean
  error: string | null
  itemCount: number
}

defineProps<Props>()

const emit = defineEmits<{
  'retry': []
  'sentinel-mounted': [element: HTMLElement | null]
}>()

const handleSentinelMounted = (element: HTMLElement | null) => {
  emit('sentinel-mounted', element)
}
</script>

<style lang="sass" scoped>
@import '@/assets/styles/variables'
@import '@/assets/styles/mixins'

.load-more
  padding: 32px 16px
  display: flex
  flex-direction: column
  align-items: center
  gap: 16px

  &__loading
    display: flex
    flex-direction: column
    align-items: center
    gap: 12px

  &__spinner
    width: 40px
    height: 40px
    border: 3px solid $gray-200
    border-top-color: $primary-color
    border-radius: 50%
    animation: spin 1s linear infinite

  &__text
    font-size: 14px
    color: $gray-500

  &__error
    display: flex
    flex-direction: column
    align-items: center
    gap: 12px
    padding: 24px
    background: rgba($error-color, 0.05)
    border-radius: $radius
    width: 100%
    max-width: 400px

    &-icon
      font-size: 32px

    &-text
      font-size: 14px
      color: $error-color
      text-align: center

  &__retry-btn
    display: flex
    align-items: center
    gap: 8px
    padding: 10px 20px
    background: $primary-color
    color: white
    border: none
    border-radius: $radius
    font-size: 14px
    font-weight: 600
    cursor: pointer
    transition: background $transition-fast

    &:hover
      background: darken($primary-color, 8%)

  &__end
    display: flex
    align-items: center
    gap: 16px
    width: 100%
    max-width: 400px

    &-line
      flex: 1
      height: 1px
      background: $gray-200

    &-text
      font-size: 13px
      color: $gray-400
      white-space: nowrap

@keyframes spin
  to
    transform: rotate(360deg)
</style>
```

---

## 5ï¸âƒ£ Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†ĞµĞ¹ Ğ´Ğ¾ÑĞºĞ¸

### ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ `pages/boards/[id].vue`

```vue
<template>
  <main class="board-page">
    <div class="board-page__container">
      <div v-if="initialLoading" class="board-page__loading">
        <div class="board-page__spinner"></div>
        <p>Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ´Ğ¾ÑĞºĞ¸...</p>
      </div>

      <div v-else-if="boardError || !currentBoard" class="board-page__error">
        <div class="board-page__error-icon">ğŸ˜•</div>
        <h2>Ğ”Ğ¾ÑĞºĞ° Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ°</h2>
        <p>{{ boardError || 'Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾, Ğ¾Ğ½Ğ° Ğ±Ñ‹Ğ»Ğ° ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ°' }}</p>
        <NuxtLink to="/boards" class="board-page__back-btn">Ğ’ĞµÑ€Ğ½ÑƒÑ‚ÑŒÑÑ Ğº Ğ´Ğ¾ÑĞºĞ°Ğ¼</NuxtLink>
      </div>

      <template v-else>
        <header class="board-page__header">
          <NuxtLink to="/boards" class="board-page__back">â† ĞĞ°Ğ·Ğ°Ğ´ Ğº Ğ´Ğ¾ÑĞºĞ°Ğ¼</NuxtLink>

          <div class="board-page__info">
            <div class="board-page__title-row">
              <h1 class="board-page__title">{{ currentBoard.title }}</h1>
              <span v-if="currentBoard.isPrivate" class="board-page__badge">ğŸ”’ ĞŸÑ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ğ°Ñ</span>
            </div>
            <p v-if="currentBoard.description" class="board-page__desc">{{ currentBoard.description }}</p>
            <div class="board-page__meta">
              <span>{{ totalImages }} Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹</span>
              <span>â€¢</span>
              <span>ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾ {{ formatDate(currentBoard.updatedAt) }}</span>
            </div>
          </div>

          <div class="board-page__actions">
            <button class="board-page__action-btn" @click="openEditModal">âœï¸ Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ</button>
            <button class="board-page__action-btn board-page__action-btn--primary" @click="openUploadModal">
              ğŸ“¤ Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ
            </button>
          </div>
        </header>

        <!-- ĞŸĞ°Ğ½ĞµĞ»ÑŒ Ğ¿Ğ¾Ğ¸ÑĞºĞ° -->
        <SearchPanel 
          :board-id="boardId" 
          class="board-page__search"
        />

        <section class="board-page__gallery">
          <!-- Ğ“Ğ°Ğ»ĞµÑ€ĞµÑ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ -->
          <div v-if="displayedImages.length" class="board-page__images">
            <article 
              v-for="image in displayedImages" 
              :key="image.id" 
              class="board-page__image"
              @click="handleImageClick(image)"
            >
              <img :src="image.url" :alt="image.title" loading="lazy" />
            </article>
          </div>

          <!-- ĞŸÑƒÑÑ‚Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸ Ğ¿Ğ¾Ğ¸ÑĞºĞµ -->
          <div v-else-if="hasActiveFilters && !isLoading" class="board-page__no-results">
            <div class="board-page__no-results-icon">ğŸ”</div>
            <h2>ĞĞ¸Ñ‡ĞµĞ³Ğ¾ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾</h2>
            <p>ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹Ñ‚Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ¿Ğ¾Ğ¸ÑĞºĞ°</p>
            <button 
              class="board-page__clear-btn"
              @click="clearFilters"
            >
              Ğ¡Ğ±Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹
            </button>
          </div>

          <!-- ĞŸÑƒÑÑ‚Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ±ĞµĞ· Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ -->
          <div v-else-if="!displayedImages.length && !isLoading" class="board-page__empty">
            <div class="board-page__empty-icon">ğŸ–¼ï¸</div>
            <h2>Ğ˜Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ Ğ¿Ğ¾ĞºĞ° Ğ½ĞµÑ‚</h2>
            <p>Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ğ¿ĞµÑ€Ğ²Ğ¾Ğµ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ² ÑÑ‚Ñƒ Ğ´Ğ¾ÑĞºÑƒ</p>
            <button class="board-page__upload-btn" @click="openUploadModal">ğŸ“¤ Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ</button>
          </div>

          <!-- ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ / ĞºĞ¾Ğ½Ñ†Ğ° ÑĞ¿Ğ¸ÑĞºĞ° -->
          <InfiniteScrollLoadMore
            :is-loading="isLoading"
            :has-more="hasMore"
            :error="loadError"
            :item-count="displayedImages.length"
            @retry="retry"
            @sentinel-mounted="handleSentinelMounted"
          />
        </section>
      </template>
    </div>

    <!-- ĞœĞ¾Ğ´Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¾ĞºĞ½Ğ° -->
    <!-- ... ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ Ğ¼Ğ¾Ğ´Ğ°Ğ»ĞºĞ¸ ... -->
  </main>
</template>

<script setup lang="ts">
import { ref, computed, onMounted, onUnmounted, watch } from 'vue'
import { useBoards } from '~/composables/useBoards'
import { useInfiniteScroll } from '~/composables/useInfiniteScroll'
import { useSearch } from '~/composables/useSearch'
import type { Image, ImageViewContext } from '~/types/image'
import type { UpdateBoardDto } from '~/types/board'

const route = useRoute()
const { currentBoard, isLoading: boardLoading, error: boardError, loadBoard, updateBoard, clearCurrentBoard } = useBoards()

const boardId = computed(() => route.params.id as string)

// Infinite Scroll
const {
  items: infiniteImages,
  isLoading,
  hasMore,
  error: loadError,
  loadMore,
  reset,
  retry,
  sentinelRef
} = useInfiniteScroll({
  boardId: boardId.value,
  config: {
    pageSize: 12,
    threshold: 200,
    initialLoad: false
  }
})

// Search & Filters
const { 
  filteredImages,
  hasActiveFilters, 
  clearFilters 
} = useSearch(boardId.value)

// ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ĞµĞ¼Ñ‹Ğµ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ (Ñ ÑƒÑ‡Ñ‘Ñ‚Ğ¾Ğ¼ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ²)
const displayedImages = computed(() => {
  if (hasActiveFilters.value) {
    // ĞŸÑ€Ğ¸ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ… Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ ĞºĞ»Ğ¸ĞµĞ½Ñ‚ÑĞºÑƒÑ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ
    return filteredImages.value
  }
  // Ğ‘ĞµĞ· Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ² Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
  return infiniteImages.value
})

// ĞĞ±Ñ‰ĞµĞµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹
const totalImages = computed(() => displayedImages.value.length)

// ĞĞ°Ñ‡Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ´Ğ¾ÑĞºĞ¸
const initialLoading = computed(() => boardLoading.value && !currentBoard.value)

// ĞœĞ¾Ğ´Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¾ĞºĞ½Ğ°
const isEditModalOpen = ref(false)
const isUploadModalOpen = ref(false)
const isImageModalOpen = ref(false)
const isSubmitting = ref(false)

const selectedImage = ref<Image | null>(null)
const selectedImageIndex = ref(-1)

const imageViewContext = computed<ImageViewContext>(() => ({
  currentIndex: selectedImageIndex.value,
  totalImages: displayedImages.value.length,
  hasNext: selectedImageIndex.value < displayedImages.value.length - 1,
  hasPrev: selectedImageIndex.value > 0
}))

// Handlers
const handleSentinelMounted = (element: HTMLElement | null) => {
  sentinelRef.value = element
}

const formatDate = (dateString: string): string => {
  return new Date(dateString).toLocaleDateString('ru-RU', {
    day: 'numeric', month: 'long', year: 'numeric'
  })
}

const openEditModal = () => { isEditModalOpen.value = true }
const closeEditModal = () => { isEditModalOpen.value = false }
const openUploadModal = () => { isUploadModalOpen.value = true }
const closeUploadModal = () => { isUploadModalOpen.value = false }

const handleImageClick = (image: Image) => {
  selectedImage.value = image
  selectedImageIndex.value = displayedImages.value.findIndex(img => img.id === image.id)
  isImageModalOpen.value = true
  document.body.style.overflow = 'hidden'
}

const closeImageModal = () => {
  isImageModalOpen.value = false
  selectedImage.value = null
  selectedImageIndex.value = -1
  document.body.style.overflow = ''
}

const nextImage = () => {
  if (imageViewContext.value.hasNext) {
    selectedImageIndex.value++
    selectedImage.value = displayedImages.value[selectedImageIndex.value] ?? null
  }
}

const prevImage = () => {
  if (imageViewContext.value.hasPrev) {
    selectedImageIndex.value--
    selectedImage.value = displayedImages.value[selectedImageIndex.value] ?? null
  }
}

const handleImageUpdate = (updatedImage: Image) => {
  selectedImage.value = updatedImage
}

const handleImageDelete = (_id: string) => {
  if (displayedImages.value.length <= 1) {
    closeImageModal()
  } else if (selectedImageIndex.value >= displayedImages.value.length - 1) {
    selectedImageIndex.value--
    selectedImage.value = displayedImages.value[selectedImageIndex.value] ?? null
  } else {
    selectedImage.value = displayedImages.value[selectedImageIndex.value] ?? null
  }
}

const handleEditSubmit = async (data: UpdateBoardDto) => {
  isSubmitting.value = true
  try {
    await updateBoard(boardId.value, data)
    closeEditModal()
  } finally {
    isSubmitting.value = false
  }
}

const handleImagesUploaded = () => {
  // Ğ¡Ğ±Ñ€Ğ°ÑÑ‹Ğ²Ğ°ĞµĞ¼ Ğ¸ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµĞ¼ Ğ¿Ğ¾ÑĞ»Ğµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹
  reset()
}

// Lifecycle
onMounted(async () => {
  await loadBoard(boardId.value)
  if (currentBoard.value) {
    await loadMore() // Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµĞ¼ Ğ¿ĞµÑ€Ğ²ÑƒÑ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ
  }
})

onUnmounted(() => {
  clearCurrentBoard()
  document.body.style.overflow = ''
})

watch(boardId, async (newId) => {
  if (newId) {
    await loadBoard(newId)
    if (currentBoard.value) {
      await reset()
    }
  }
})
</script>

<style lang="sass" scoped>
@import '@/assets/styles/variables'
@import '@/assets/styles/mixins'

.board-page
  min-height: 100vh
  background: $gray-50
  padding: 32px 0

  &__container
    max-width: $breakpoint-desktop
    margin: 0 auto
    padding: 0 24px
    
    @include mobile
      padding: 0 16px

  &__loading, &__error
    text-align: center
    padding: 64px 24px

  &__spinner
    width: 48px
    height: 48px
    border: 3px solid $gray-200
    border-top-color: $primary-color
    border-radius: 50%
    margin: 0 auto 16px
    animation: spin 1s linear infinite

  &__error
    &-icon
      font-size: 64px
      margin-bottom: 16px
    h2
      font-size: 24px
      color: $text-light
      margin-bottom: 8px
    p
      color: $gray-400
      margin-bottom: 24px

  &__back-btn
    display: inline-block
    padding: 12px 24px
    background: $primary-color
    color: white
    text-decoration: none
    border-radius: $radius
    font-weight: 600

  &__header
    margin-bottom: 32px

  &__back
    display: inline-flex
    align-items: center
    gap: 8px
    color: $gray-500
    text-decoration: none
    font-size: 14px
    margin-bottom: 16px
    transition: color $transition-fast
    &:hover
      color: $primary-color

  &__info
    margin-bottom: 24px

  &__title-row
    display: flex
    align-items: center
    gap: 12px
    margin-bottom: 8px
    flex-wrap: wrap

  &__title
    font-size: 32px
    font-weight: 700
    color: $text-light
    
    @include mobile
      font-size: 28px

  &__badge
    padding: 6px 12px
    background: $gray-100
    border-radius: $radius-full
    font-size: 14px
    color: $gray-600

  &__desc
    font-size: 16px
    color: $gray-500
    margin-bottom: 12px
    max-width: 600px

  &__meta
    display: flex
    gap: 8px
    font-size: 14px
    color: $gray-400

  &__actions
    display: flex
    gap: 12px
    
    @include mobile
      flex-direction: column

  &__action-btn
    display: flex
    align-items: center
    gap: 8px
    padding: 10px 20px
    background: white
    color: $text-light
    border: 2px solid $gray-200
    border-radius: $radius
    font-size: 14px
    font-weight: 600
    cursor: pointer
    transition: all $transition-fast
    &:hover
      border-color: $primary-color
      color: $primary-color
    &--primary
      background: $primary-color
      color: white
      border-color: $primary-color
      &:hover
        background: darken($primary-color, 8%)
        border-color: darken($primary-color, 8%)
        color: white

  &__search
    margin-bottom: 24px

  &__gallery
    min-height: 400px

  &__images
    display: grid
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr))
    gap: 16px
    
    @include mobile
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr))
      gap: 12px

  &__image
    border-radius: $radius-sm
    overflow: hidden
    cursor: pointer
    transition: transform $transition-fast
    img
      width: 100%
      height: auto
      display: block
    &:hover
      transform: translateY(-4px)

  &__empty, &__no-results
    text-align: center
    padding: 64px 24px
    background: white
    border-radius: $radius-lg
    
    &-icon
      font-size: 64px
      margin-bottom: 16px
    h2
      font-size: 24px
      color: $text-light
      margin-bottom: 8px
    p
      color: $gray-400
      margin-bottom: 24px

  &__upload-btn, &__clear-btn
    display: inline-flex
    align-items: center
    gap: 8px
    padding: 12px 24px
    background: $primary-color
    color: white
    border: none
    border-radius: $radius
    font-size: 16px
    font-weight: 600
    cursor: pointer

  &__modal
    position: fixed
    inset: 0
    background: rgba(0, 0, 0, 0.5)
    display: flex
    align-items: center
    justify-content: center
    z-index: $z-index-modal
    padding: 16px

    &-content
      position: relative
      background: white
      border-radius: $radius-lg
      padding: 32px
      max-width: 500px
      width: 100%

    &-close
      position: absolute
      top: 16px
      right: 16px
      width: 32px
      height: 32px
      border: none
      background: $gray-100
      border-radius: 50%
      font-size: 18px
      cursor: pointer

.modal-enter-active, .modal-leave-active
  transition: all 0.3s ease

.modal-enter-from, .modal-leave-to
  opacity: 0

@keyframes spin
  to
    transform: rotate(360deg)
</style>
```

---

## 6ï¸âƒ£ ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ useSearch Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸ĞµĞ¹

### ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ `composables/useSearch.ts`

```typescript
import { computed, watch } from 'vue'
import { storeToRefs } from 'pinia'
import { useSearchStore } from '~/store/search'
import { useImagesStore } from '~/store/images'
import type { Image } from '~/types/image'
import type { SortOption } from '~/types/search'

/**
 * Composable Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ¸ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹
 * Ğ¢ĞµĞ¿ĞµÑ€ÑŒ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ñ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸
 */
export const useSearch = (boardId?: string) => {
  const searchStore = useSearchStore()
  const imagesStore = useImagesStore()

  const {
    query,
    selectedTags,
    sortBy,
    isSearching,
    history,
    hasActiveFilters,
    activeFiltersCount
  } = storeToRefs(searchStore)

  // Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ Ğ¸Ğ· store (ÑƒĞ¶Ğµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ½Ñ‹Ğµ Ñ‡ĞµÑ€ĞµĞ· infinite scroll)
  const { images } = storeToRefs(imagesStore)

  /**
   * ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ²ÑĞµÑ… ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ñ… Ñ‚ĞµĞ³Ğ¾Ğ² Ğ¸Ğ· Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ½Ñ‹Ñ… Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹
   */
  const availableTags = computed(() => {
    const boardImages = boardId 
      ? images.value.filter(img => img.boardId === boardId)
      : images.value

    const tagsSet = new Set<string>()
    boardImages.forEach(img => {
      img.tags?.forEach(tag => tagsSet.add(tag))
    })
    
    return Array.from(tagsSet).sort()
  })

  /**
   * Ğ¡Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹
   */
  const sortImages = (imageList: Image[], sort: SortOption): Image[] => {
    const sorted = [...imageList]
    
    switch (sort) {
      case 'newest':
        return sorted.sort((a, b) => 
          new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()
        )
      case 'oldest':
        return sorted.sort((a, b) => 
          new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime()
        )
      case 'title_asc':
        return sorted.sort((a, b) => 
          (a.title || '').localeCompare(b.title || '')
        )
      case 'title_desc':
        return sorted.sort((a, b) => 
          (b.title || '').localeCompare(a.title || '')
        )
      default:
        return sorted
    }
  }

  /**
   * Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ (ĞºĞ»Ğ¸ĞµĞ½Ñ‚ÑĞºĞ°Ñ)
   * ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ÑĞµÑ‚ÑÑ Ğº ÑƒĞ¶Ğµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ½Ñ‹Ğ¼ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸ÑĞ¼
   */
  const filteredImages = computed(() => {
    let imageList = boardId 
      ? images.value.filter(img => img.boardId === boardId)
      : images.value

    // Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ Ğ¿Ğ¾ Ğ¿Ğ¾Ğ¸ÑĞºĞ¾Ğ²Ğ¾Ğ¼Ñƒ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑƒ
    if (query.value.trim()) {
      const searchLower = query.value.toLowerCase().trim()
      imageList = imageList.filter(img => 
        img.title?.toLowerCase().includes(searchLower) ||
        img.description?.toLowerCase().includes(searchLower) ||
        img.tags?.some(tag => tag.toLowerCase().includes(searchLower))
      )
    }

    // Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ Ğ¿Ğ¾ Ñ‚ĞµĞ³Ğ°Ğ¼
    if (selectedTags.value.length > 0) {
      imageList = imageList.filter(img =>
        selectedTags.value.every(tag => img.tags?.includes(tag))
      )
    }

    // Ğ¡Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°
    imageList = sortImages(imageList, sortBy.value)

    return imageList
  })

  /**
   * ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²
   */
  const resultsCount = computed(() => filteredImages.value.length)

  /**
   * Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ñ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸ĞµĞ¼ Ğ² Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ
   */
  const search = (searchQuery: string) => {
    searchStore.setQuery(searchQuery)
    if (searchQuery.trim()) {
      searchStore.addToHistory(searchQuery)
    }
  }

  /**
   * ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ¸Ğ· Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸
   */
  const applyFromHistory = (historyQuery: string) => {
    searchStore.setQuery(historyQuery)
  }

  return {
    // State
    query,
    selectedTags,
    sortBy,
    isSearching,
    history,
    hasActiveFilters,
    activeFiltersCount,
    // Computed
    availableTags,
    filteredImages,
    resultsCount,
    // Actions
    search,
    applyFromHistory,
    setQuery: searchStore.setQuery,
    setTags: searchStore.setTags,
    toggleTag: searchStore.toggleTag,
    setSortBy: searchStore.setSortBy,
    setSearching: searchStore.setSearching,
    removeFromHistory: searchStore.removeFromHistory,
    clearHistory: searchStore.clearHistory,
    clearFilters: searchStore.clearFilters
  }
}
```

---

## 7ï¸âƒ£ Ğ’Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)

### Ğ¤Ğ°Ğ¹Ğ»: `composables/useVirtualScroll.ts`

Ğ”Ğ»Ñ Ğ¾Ñ‡ĞµĞ½ÑŒ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ñ… ÑĞ¿Ğ¸ÑĞºĞ¾Ğ² Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ²Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ:

```typescript
import { ref, computed, onMounted, onUnmounted, type Ref } from 'vue'

interface UseVirtualScrollOptions {
  itemHeight: number
  containerHeight: number
  overscan?: number
}

interface UseVirtualScrollReturn {
  visibleItems: Ref<{ index: number; style: { transform: string } }[]>
  totalHeight: Ref<number>
  containerRef: Ref<HTMLElement | null>
  scrollTo: (index: number) => void
}

/**
 * Composable Ğ´Ğ»Ñ Ğ²Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ ÑĞ¿Ğ¸ÑĞºĞ°
 * Ğ ĞµĞ½Ğ´ĞµÑ€Ğ¸Ñ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ñ‹Ğµ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ñ‹ Ğ´Ğ»Ñ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸
 */
export function useVirtualScroll<T>(
  items: Ref<T[]>,
  options: UseVirtualScrollOptions
): UseVirtualScrollReturn {
  const { itemHeight, containerHeight, overscan = 3 } = options
  
  const containerRef = ref<HTMLElement | null>(null)
  const scrollTop = ref(0)

  const totalHeight = computed(() => items.value.length * itemHeight)

  const visibleItems = computed(() => {
    const startIndex = Math.max(0, Math.floor(scrollTop.value / itemHeight) - overscan)
    const endIndex = Math.min(
      items.value.length,
      Math.ceil((scrollTop.value + containerHeight) / itemHeight) + overscan
    )

    const visible = []
    for (let i = startIndex; i < endIndex; i++) {
      visible.push({
        index: i,
        style: {
          transform: `translateY(${i * itemHeight}px)`
        }
      })
    }
    return visible
  })

  const handleScroll = () => {
    if (containerRef.value) {
      scrollTop.value = containerRef.value.scrollTop
    }
  }

  const scrollTo = (index: number) => {
    if (containerRef.value) {
      containerRef.value.scrollTop = index * itemHeight
    }
  }

  onMounted(() => {
    containerRef.value?.addEventListener('scroll', handleScroll, { passive: true })
  })

  onUnmounted(() => {
    containerRef.value?.removeEventListener('scroll', handleScroll)
  })

  return {
    visibleItems,
    totalHeight,
    containerRef,
    scrollTo
  }
}
```

---

## ğŸ”Ÿ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² ÑÑ‚Ğ°Ğ¿Ğ°

```
frontend/
â”œâ”€â”€ types/
â”‚   â””â”€â”€ pagination.ts                    # Ğ¢Ğ¸Ğ¿Ñ‹ Ğ´Ğ»Ñ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸
â”œâ”€â”€ store/
â”‚   â””â”€â”€ images.ts                        # Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ñ‹Ğ¹ store Ñ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸ĞµĞ¹
â”œâ”€â”€ composables/
â”‚   â”œâ”€â”€ useInfiniteScroll.ts             # Composable Ğ´Ğ»Ñ infinite scroll
â”‚   â”œâ”€â”€ useSearch.ts                     # ĞĞ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½Ğ½Ñ‹Ğ¹ composable Ğ¿Ğ¾Ğ¸ÑĞºĞ°
â”‚   â””â”€â”€ useVirtualScroll.ts              # Ğ’Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
â”œâ”€â”€ components/
â”‚   â””â”€â”€ infinite-scroll/
â”‚       â”œâ”€â”€ Sentinel.vue                 # Ğ¢Ñ€Ğ¸Ğ³Ğ³ĞµÑ€ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸
â”‚       â””â”€â”€ LoadMore.vue                 # Ğ˜Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸/ĞºĞ¾Ğ½Ñ†Ğ°
â””â”€â”€ pages/
    â””â”€â”€ boards/
        â””â”€â”€ [id].vue                     # ĞĞ±Ğ½Ğ¾Ğ²Ğ»Ñ‘Ğ½Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ´Ğ¾ÑĞºĞ¸
```

---

## ğŸ“Š Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Infinite Scroll

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Board Page                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  Search Panel                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚    â”‚ Img â”‚  â”‚ Img â”‚  â”‚ Img â”‚  â”‚ Img â”‚              â”‚   â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚    â”‚ Img â”‚  â”‚ Img â”‚  â”‚ Img â”‚  â”‚ Img â”‚   Page 1     â”‚   â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚    â”‚ Img â”‚  â”‚ Img â”‚  â”‚ Img â”‚  â”‚ Img â”‚              â”‚   â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚  â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€   â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚    â”‚ Img â”‚  â”‚ Img â”‚  â”‚ Img â”‚  â”‚ Img â”‚   Page 2     â”‚   â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”˜   (loaded)   â”‚   â”‚
â”‚  â”‚                                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              [Sentinel Element]                       â”‚   â”‚ â† Intersection Observer
â”‚  â”‚                                                       â”‚   â”‚   triggers loadMore()
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚   â”‚
â”‚  â”‚         â”‚   ğŸ”„ Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°...         â”‚                 â”‚   â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚   â”‚
â”‚  â”‚                    OR                                 â”‚   â”‚
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚   â”‚
â”‚  â”‚         â”‚ â”€â”€ Ğ’ÑĞµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ¾ â”€â”€      â”‚                 â”‚   â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš™ï¸ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ

| ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ | Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|----------|----------------------|----------|
| `pageSize` | 12 | ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ Ğ½Ğ° ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ |
| `threshold` | 100px | Ğ Ğ°ÑÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ´Ğ¾ sentinel Ğ´Ğ»Ñ Ñ‚Ñ€Ğ¸Ğ³Ğ³ĞµÑ€Ğ° |
| `initialLoad` | true | Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°Ñ‚ÑŒ Ğ¿ĞµÑ€Ğ²ÑƒÑ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ Ğ¿Ñ€Ğ¸ Ğ¼Ğ¾Ğ½Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸ |

---

## ğŸ”„ Ğ–Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸

```
1. Component Mount
       â”‚
       â–¼
2. Initial Load (if enabled)
       â”‚
       â–¼
3. Intersection Observer Setup
       â”‚
       â–¼
4. User Scrolls â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                          â”‚
       â–¼                          â”‚
5. Sentinel Enters Viewport       â”‚
       â”‚                          â”‚
       â–¼                          â”‚
6. loadMore() Called              â”‚
       â”‚                          â”‚
       â”œâ”€â”€ isLoading = true       â”‚
       â”‚                          â”‚
       â–¼                          â”‚
7. Fetch Page from API            â”‚
       â”‚                          â”‚
       â”œâ”€â”€ Success â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚       â”‚                  â”‚
       â”‚       â–¼                  â”‚
       â”‚   Append Images          â”‚
       â”‚       â”‚                  â”‚
       â”‚       â–¼                  â”‚
       â”‚   page++                 â”‚
       â”‚       â”‚                  â”‚
       â”‚       â–¼                  â”‚
       â”‚   hasMore? â”€â”€â”€â”€ No â”€â”€â–º Stop Observer
       â”‚       â”‚
       â”‚      Yes
       â”‚       â”‚
       â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â””â”€â”€ Error
               â”‚
               â–¼
           Show Retry Button
               â”‚
               â–¼
           User Clicks Retry â”€â”€â”€â”€â”€â–º Go to Step 6
```

---

## âœ… Ğ§ĞµĞºĞ»Ğ¸ÑÑ‚ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ

### Ğ¢Ğ¸Ğ¿Ñ‹ Ğ¸ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑÑ‹
- [ ] `PaginationState` - ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸
- [ ] `PageRequest` - Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°
- [ ] `PaginatedResponse` - Ğ¾Ñ‚Ğ²ĞµÑ‚ Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸
- [ ] `InfiniteScrollConfig` - ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
- [ ] `LoadingState` - ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸

### Store
- [ ] Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ `useImagesStore` Ğ´Ğ»Ñ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸
- [ ] `fetchPagedImages` - Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹
- [ ] `appendImages` - Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹
- [ ] `resetPagination` - ÑĞ±Ñ€Ğ¾Ñ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸
- [ ] `updatePagination` - Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ

### Composables
- [ ] `useInfiniteScroll` - Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°
- [ ] Intersection Observer setup/cleanup
- [ ] Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ğ¼Ğ¸
- [ ] `useVirtualScroll` (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)

### ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹
- [ ] `Sentinel` - Ñ‚Ñ€Ğ¸Ğ³Ğ³ĞµÑ€ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸
- [ ] `LoadMore` - Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ
- [ ] Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ `pages/boards/[id].vue`

### Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»
- [ ] ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¿Ñ€Ğ¸ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğµ
- [ ] Ğ˜Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸
- [ ] Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¾ ĞºĞ¾Ğ½Ñ†Ğµ ÑĞ¿Ğ¸ÑĞºĞ°
- [ ] ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº Ñ retry
- [ ] Ğ¡Ğ±Ñ€Ğ¾Ñ Ğ¿Ñ€Ğ¸ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¸ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ¾Ğ²
- [ ] ĞŸÑ€ĞµĞ´Ğ¾Ñ‚Ğ²Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€ÑƒÑÑ‰Ğ¸Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²

---

## ğŸ¯ Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ ÑÑ‚Ğ°Ğ¿Ğ°

ĞŸĞ¾ÑĞ»Ğµ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ ÑÑ‚Ğ¾Ğ³Ğ¾ ÑÑ‚Ğ°Ğ¿Ğ° Ñƒ Ğ²Ğ°Ñ Ğ±ÑƒĞ´ĞµÑ‚:

1. **Intersection Observer** - ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğµ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ ÑĞºÑ€Ğ¾Ğ»Ğ»Ğ°
2. **ĞŸĞ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…** - Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¿Ğ¾ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°Ğ¼
3. **Ğ˜Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸** - Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ°Ñ ÑĞ²ÑĞ·ÑŒ
4. **ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° ĞºĞ¾Ğ½Ñ†Ğ° ÑĞ¿Ğ¸ÑĞºĞ°** - Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ğ²Ğ½Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ
5. **ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº** - retry Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»
6. **Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ğ¼Ğ¸** - ÑĞ±Ñ€Ğ¾Ñ Ğ¿Ñ€Ğ¸ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¸
7. **ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ** - Ğ¿Ñ€ĞµĞ´Ğ¾Ñ‚Ğ²Ñ€Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ Ğ»Ğ¸ÑˆĞ½Ğ¸Ñ… Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²

---

## ğŸ”œ Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ ÑÑ‚Ğ°Ğ¿

**Ğ­Ñ‚Ğ°Ğ¿ 11: ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ**
- Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ñ
- Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ñ
- ĞĞ²Ğ°Ñ‚Ğ°Ñ€ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
- ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¿Ñ€Ğ¸Ğ²Ğ°Ñ‚Ğ½Ğ¾ÑÑ‚Ğ¸
- ĞœĞ¾Ğ¸ Ğ´Ğ¾ÑĞºĞ¸ Ğ¸ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ

Ğ“Ğ¾Ñ‚Ğ¾Ğ² Ğº ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ¼Ñƒ ÑÑ‚Ğ°Ğ¿Ñƒ! ğŸš€
