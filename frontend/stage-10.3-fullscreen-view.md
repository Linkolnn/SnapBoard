# –≠—Ç–∞–ø 10.3: –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (Fullscreen View) SnapBoard

## üéØ –¶–µ–ª—å —ç—Ç–∞–ø–∞
–ò—Å–ø—Ä–∞–≤–∏—Ç—å –±—Ä–µ–π–∫–ø–æ–∏–Ω—Ç—ã –≤ MasonryGrid —Å–æ–≥–ª–∞—Å–Ω–æ variables.sass, —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ —Å—Ç–∏–ª–µ Pinterest —Å –ø–∞–Ω–µ–ª—å—é –¥–µ–π—Å—Ç–≤–∏–π –≤–Ω–∏–∑—É –∏ —Å–µ–∫—Ü–∏–µ–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–≥–æ–≤/–Ω–∞–∑–≤–∞–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.

---

## üìã –ß–µ–∫–ª–∏—Å—Ç —ç—Ç–∞–ø–∞
- [x] –ë—Ä–µ–π–∫–ø–æ–∏–Ω—Ç 2 –∫–æ–ª–æ–Ω–∫–∏ –ø—Ä–∏ —à–∏—Ä–∏–Ω–µ < 380px (–≤–º–µ—Å—Ç–æ 350px)
- [x] –ë—Ä–µ–π–∫–ø–æ–∏–Ω—Ç—ã –≤ gridConfig.ts —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç variables.sass
- [x] –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É
- [x] –ü–∞–Ω–µ–ª—å –¥–µ–π—Å—Ç–≤–∏–π –≤–Ω–∏–∑—É (–∏–∑–±—Ä–∞–Ω–Ω–æ–µ, —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å, –ø–æ–¥–µ–ª–∏—Ç—å—Å—è)
- [x] –°–µ–∫—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ–¥ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º (MasonryGrid)
- [x] –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–≥–æ–≤ –∏ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- [x] –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ (—Å—Ç—Ä–µ–ª–∫–∏)
- [x] –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –Ω–∞ —Ñ–æ–Ω –∏–ª–∏ –∫–Ω–æ–ø–∫—É

---

## 1Ô∏è‚É£ –ë—Ä–µ–π–∫–ø–æ–∏–Ω—Ç—ã —Å–æ–≥–ª–∞—Å–Ω–æ variables.sass

### –ü—Ä–æ–±–ª–µ–º–∞
–¢–µ–∫—É—â–∏–µ –±—Ä–µ–π–∫–ø–æ–∏–Ω—Ç—ã –≤ `gridConfig.ts` –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç `variables.sass`:
- variables.sass: `$breakpoint-mobile: 576px`, `$breakpoint-tablet: 768px`, `$breakpoint-laptop: 1024px`
- gridConfig.ts –∏—Å–ø–æ–ª—å–∑—É–µ—Ç: 576px, 1024px (–ø—Ä–æ–ø—É—â–µ–Ω tablet 768px)

–¢–∞–∫–∂–µ –Ω—É–∂–Ω–æ 2 –∫–æ–ª–æ–Ω–∫–∏ –ø—Ä–∏ —à–∏—Ä–∏–Ω–µ < 380px (–Ω–µ 350px).

### –†–µ—à–µ–Ω–∏–µ
–û–±–Ω–æ–≤–∏—Ç—å `gridConfig.ts` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –±—Ä–µ–π–∫–ø–æ–∏–Ω—Ç–∞–º–∏.

### –§–∞–π–ª: `utils/gridConfig.ts`

```typescript
/**
 * –ï–¥–∏–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è masonry grid
 * –ë—Ä–µ–π–∫–ø–æ–∏–Ω—Ç—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç variables.sass
 */
export const MASONRY_CONFIG = {
  // –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –∫–æ–ª–æ–Ω–∫–∏
  minColumnWidth: {
    desktop: 280,    // > 1024px
    laptop: 250,     // 768px - 1024px
    tablet: 220,     // 576px - 768px
    mobile: 140,     // 380px - 576px
    narrow: 120      // < 380px (–¥–ª—è 2 –∫–æ–ª–æ–Ω–æ–∫ –Ω–∞ —É–∑–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö)
  },
  
  // –û—Ç—Å—Ç—É–ø—ã –º–µ–∂–¥—É —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
  gap: {
    desktop: 16,
    laptop: 14,
    tablet: 12,
    mobile: 8,
    narrow: 6
  },
  
  // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–ª–æ–Ω–æ–∫
  maxColumns: 6,
  
  // –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–ª–æ–Ω–æ–∫
  minColumns: 2,
  
  // –ë—Ä–µ–π–∫–ø–æ–∏–Ω—Ç—ã (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç variables.sass)
  breakpoints: {
    desktop: 1440,
    laptop: 1024,
    tablet: 768,
    mobile: 576,
    narrow: 380  // –ù–æ–≤—ã–π –±—Ä–µ–π–∫–ø–æ–∏–Ω—Ç –¥–ª—è 2 –∫–æ–ª–æ–Ω–æ–∫
  }
}

/**
 * –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ —ç–∫—Ä–∞–Ω–∞
 */
export function getMasonryConfig() {
  if (typeof window === 'undefined') {
    return {
      minColumnWidth: MASONRY_CONFIG.minColumnWidth.desktop,
      gap: MASONRY_CONFIG.gap.desktop
    }
  }
  
  const width = window.innerWidth
  const { breakpoints, minColumnWidth, gap } = MASONRY_CONFIG
  
  // < 380px - —É–∑–∫–∏–µ —ç–∫—Ä–∞–Ω—ã, 2 –∫–æ–ª–æ–Ω–∫–∏
  if (width < breakpoints.narrow) {
    return {
      minColumnWidth: minColumnWidth.narrow,
      gap: gap.narrow
    }
  }
  
  // 380px - 576px - mobile
  if (width < breakpoints.mobile) {
    return {
      minColumnWidth: minColumnWidth.mobile,
      gap: gap.mobile
    }
  }
  
  // 576px - 768px - tablet
  if (width < breakpoints.tablet) {
    return {
      minColumnWidth: minColumnWidth.tablet,
      gap: gap.tablet
    }
  }
  
  // 768px - 1024px - laptop
  if (width < breakpoints.laptop) {
    return {
      minColumnWidth: minColumnWidth.laptop,
      gap: gap.laptop
    }
  }
  
  // > 1024px - desktop
  return {
    minColumnWidth: minColumnWidth.desktop,
    gap: gap.desktop
  }
}
```

---

## 2Ô∏è‚É£ –ù–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç FullscreenModal

### –ü—Ä–æ–±–ª–µ–º–∞
–¢–µ–∫—É—â–∏–π `Modal.vue` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å sidebar. –ù—É–∂–µ–Ω –Ω–æ–≤—ã–π —Ä–µ–∂–∏–º - –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –∫–∞–∫ –≤ Pinterest.

### –†–µ—à–µ–Ω–∏–µ
–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `FullscreenModal.vue` –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

### –§–∞–π–ª: `components/image/FullscreenModal.vue`

```vue
<template>
  <Teleport to="body">
    <Transition name="fullscreen">
      <div 
        v-if="isOpen" 
        class="fullscreen-modal"
        @click.self="handleClose"
      >
        <!-- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è -->
        <button class="fullscreen-modal__close" @click="handleClose">
          ‚úï
        </button>
        
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <button
          v-if="viewContext.hasPrev"
          class="fullscreen-modal__nav fullscreen-modal__nav--prev"
          @click="handlePrev"
        >
          ‚Äπ
        </button>
        
        <button
          v-if="viewContext.hasNext"
          class="fullscreen-modal__nav fullscreen-modal__nav--next"
          @click="handleNext"
        >
          ‚Ä∫
        </button>
        
        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
        <div class="fullscreen-modal__content">
          <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω -->
          <div class="fullscreen-modal__image-section">
            <img
              :src="image.url"
              :alt="image.title || 'Image'"
              class="fullscreen-modal__image"
            />
          </div>
          
          <!-- –ü–∞–Ω–µ–ª—å –¥–µ–π—Å—Ç–≤–∏–π –≤–Ω–∏–∑—É -->
          <div class="fullscreen-modal__actions">
            <div class="fullscreen-modal__actions-left">
              <h3 class="fullscreen-modal__title">{{ image.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è' }}</h3>
              <div v-if="image.tags?.length" class="fullscreen-modal__tags">
                <span 
                  v-for="tag in image.tags.slice(0, 5)" 
                  :key="tag"
                  class="fullscreen-modal__tag"
                >
                  #{{ tag }}
                </span>
              </div>
            </div>
            
            <div class="fullscreen-modal__actions-right">
              <button 
                class="fullscreen-modal__btn fullscreen-modal__btn--favorite"
                :class="{ 'fullscreen-modal__btn--active': isFavorite }"
                @click="toggleFavorite"
              >
                <span>{{ isFavorite ? '‚ù§Ô∏è' : 'ü§ç' }}</span>
                <span>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
              </button>
              
              <button 
                class="fullscreen-modal__btn fullscreen-modal__btn--save"
                @click="openSaveModal"
              >
                <span>üìå</span>
                <span>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</span>
              </button>
              
              <button 
                class="fullscreen-modal__btn fullscreen-modal__btn--share"
                @click="shareImage"
              >
                <span>‚ÜóÔ∏è</span>
                <span>–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</span>
              </button>
            </div>
          </div>
          
          <!-- –°–µ–∫—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π -->
          <div class="fullscreen-modal__recommendations">
            <h4>–ü–æ—Ö–æ–∂–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</h4>
            
            <ImageMasonryGrid
              v-if="recommendations.length"
              :images="recommendations"
              :is-loading="isLoadingRecommendations"
              @image-click="handleRecommendationClick"
            />
            
            <div v-else-if="isLoadingRecommendations" class="fullscreen-modal__loading">
              <span>–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π...</span>
            </div>
            
            <div v-else class="fullscreen-modal__no-recommendations">
              <span>–ù–µ—Ç –ø–æ—Ö–æ–∂–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</span>
            </div>
          </div>
        </div>
      </div>
    </Transition>
  </Teleport>
</template>

<script setup lang="ts">
import { ref, computed, watch, onMounted, onUnmounted } from 'vue'
import type { Image, ImageViewContext } from '~/types/image'
import { useImages } from '~/composables/useImages'
import { useFavorites } from '~/composables/useFavorites'

interface Props {
  isOpen: boolean
  image: Image
  viewContext: ImageViewContext
  allImages: Image[]  // –í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
}

const props = defineProps<Props>()

const emit = defineEmits<{
  close: []
  next: []
  prev: []
  imageSelect: [image: Image]
}>()

const { isFavorite, toggleFavorite: toggleFav } = useFavorites()

// –°–æ—Å—Ç–æ—è–Ω–∏–µ
const isLoadingRecommendations = ref(false)
const recommendations = ref<Image[]>([])

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
const isFavoriteComputed = computed(() => isFavorite(props.image.id))

/**
 * –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–≥–æ–≤ –∏ –Ω–∞–∑–≤–∞–Ω–∏—è
 */
const loadRecommendations = () => {
  isLoadingRecommendations.value = true
  
  try {
    const currentTags = props.image.tags || []
    const currentTitle = (props.image.title || '').toLowerCase()
    const titleWords = currentTitle.split(/\s+/).filter(w => w.length > 2)
    
    // –§–∏–ª—å—Ç—Ä—É–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é —Ç–µ–≥–æ–≤ –∏–ª–∏ —Å–ª–æ–≤ –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è
    const filtered = props.allImages.filter(img => {
      // –ò—Å–∫–ª—é—á–∞–µ–º —Ç–µ–∫—É—â–µ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
      if (img.id === props.image.id) return false
      
      const imgTags = img.tags || []
      const imgTitle = (img.title || '').toLowerCase()
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Ç–µ–≥–æ–≤
      const hasMatchingTag = currentTags.some(tag => 
        imgTags.includes(tag)
      )
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–ª–æ–≤ –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è
      const hasMatchingWord = titleWords.some(word =>
        imgTitle.includes(word)
      )
      
      return hasMatchingTag || hasMatchingWord
    })
    
    // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
    const scored = filtered.map(img => {
      const imgTags = img.tags || []
      const imgTitle = (img.title || '').toLowerCase()
      
      let score = 0
      
      // –ë–∞–ª–ª—ã –∑–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Ç–µ–≥–æ–≤
      currentTags.forEach(tag => {
        if (imgTags.includes(tag)) score += 2
      })
      
      // –ë–∞–ª–ª—ã –∑–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–ª–æ–≤
      titleWords.forEach(word => {
        if (imgTitle.includes(word)) score += 1
      })
      
      return { img, score }
    })
    
    // –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ score –∏ –±–µ—Ä—ë–º —Ç–æ–ø-12
    recommendations.value = scored
      .sort((a, b) => b.score - a.score)
      .slice(0, 12)
      .map(item => item.img)
      
  } finally {
    isLoadingRecommendations.value = false
  }
}

// –ó–∞–≥—Ä—É–∂–∞–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø—Ä–∏ —Å–º–µ–Ω–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
watch(() => props.image.id, () => {
  if (props.isOpen) {
    loadRecommendations()
  }
}, { immediate: true })

watch(() => props.isOpen, (isOpen) => {
  if (isOpen) {
    loadRecommendations()
    document.body.style.overflow = 'hidden'
  } else {
    document.body.style.overflow = ''
  }
})

const handleClose = () => {
  emit('close')
}

const handleNext = () => {
  if (props.viewContext.hasNext) {
    emit('next')
  }
}

const handlePrev = () => {
  if (props.viewContext.hasPrev) {
    emit('prev')
  }
}

const toggleFavorite = () => {
  toggleFav(props.image.id)
}

const openSaveModal = () => {
  // TODO: –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª –≤—ã–±–æ—Ä–∞ –¥–æ—Å–∫–∏
  console.log('Save to board:', props.image.id)
}

const shareImage = async () => {
  if (navigator.share) {
    try {
      await navigator.share({
        title: props.image.title || 'SnapBoard Image',
        url: props.image.url
      })
    } catch (err) {
      console.log('Share cancelled')
    }
  } else {
    // Fallback: –∫–æ–ø–∏—Ä—É–µ–º —Å—Å—ã–ª–∫—É
    await navigator.clipboard.writeText(props.image.url)
    // TODO: –ü–æ–∫–∞–∑–∞—Ç—å toast "–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞"
  }
}

const handleRecommendationClick = (image: Image) => {
  emit('imageSelect', image)
}

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏—à
const handleKeydown = (event: KeyboardEvent) => {
  if (!props.isOpen) return
  
  switch (event.key) {
    case 'Escape':
      handleClose()
      break
    case 'ArrowLeft':
      handlePrev()
      break
    case 'ArrowRight':
      handleNext()
      break
  }
}

onMounted(() => {
  document.addEventListener('keydown', handleKeydown)
})

onUnmounted(() => {
  document.removeEventListener('keydown', handleKeydown)
  document.body.style.overflow = ''
})
</script>

<style lang="sass" scoped>
@import '@/assets/styles/variables'
@import '@/assets/styles/mixins'

.fullscreen-modal
  position: fixed
  inset: 0
  background: rgba(0, 0, 0, 0.95)
  z-index: $z-index-modal
  overflow-y: auto
  
  &__close
    position: fixed
    top: 16px
    right: 16px
    width: 48px
    height: 48px
    background: rgba(255, 255, 255, 0.1)
    border: none
    border-radius: 50%
    color: white
    font-size: 24px
    cursor: pointer
    transition: all $transition-fast
    z-index: 10
    display: flex
    align-items: center
    justify-content: center
    
    &:hover
      background: rgba(255, 255, 255, 0.2)
    
    @include mobile
      width: 40px
      height: 40px
      top: 12px
      right: 12px
  
  &__nav
    position: fixed
    top: 50%
    transform: translateY(-50%)
    width: 56px
    height: 56px
    background: rgba(255, 255, 255, 0.1)
    border: none
    border-radius: 50%
    color: white
    font-size: 32px
    cursor: pointer
    transition: all $transition-fast
    z-index: 10
    display: flex
    align-items: center
    justify-content: center
    
    &:hover
      background: rgba(255, 255, 255, 0.2)
    
    &--prev
      left: 16px
    
    &--next
      right: 16px
    
    @include mobile
      width: 44px
      height: 44px
      font-size: 24px
      
      &--prev
        left: 8px
      
      &--next
        right: 8px
  
  &__content
    max-width: 1200px
    margin: 0 auto
    padding: 80px 80px 40px
    
    @include tablet
      padding: 70px 40px 32px
    
    @include mobile
      padding: 60px 16px 24px
  
  &__image-section
    display: flex
    justify-content: center
    margin-bottom: 24px
  
  &__image
    max-width: 100%
    max-height: 70vh
    object-fit: contain
    border-radius: $radius
    
    @include mobile
      max-height: 50vh
  
  &__actions
    display: flex
    justify-content: space-between
    align-items: center
    padding: 20px 24px
    background: rgba(255, 255, 255, 0.05)
    border-radius: $radius
    margin-bottom: 32px
    gap: 16px
    
    @include tablet
      flex-direction: column
      align-items: stretch
    
    @include mobile
      padding: 16px
      margin-bottom: 24px
  
  &__actions-left
    flex: 1
  
  &__actions-right
    display: flex
    gap: 12px
    
    @include mobile
      justify-content: center
      flex-wrap: wrap
  
  &__title
    color: white
    font-size: 20px
    font-weight: 600
    margin: 0 0 8px
    
    @include mobile
      font-size: 18px
  
  &__tags
    display: flex
    gap: 8px
    flex-wrap: wrap
  
  &__tag
    color: $gray-400
    font-size: 14px
    
    @include mobile
      font-size: 12px
  
  &__btn
    display: flex
    align-items: center
    gap: 8px
    padding: 12px 20px
    background: rgba(255, 255, 255, 0.1)
    border: none
    border-radius: $radius
    color: white
    font-size: 14px
    font-weight: 500
    cursor: pointer
    transition: all $transition-fast
    
    &:hover
      background: rgba(255, 255, 255, 0.2)
    
    &--active
      background: $error-color
      
      &:hover
        background: darken($error-color, 10%)
    
    @include mobile
      padding: 10px 16px
      font-size: 13px
  
  &__recommendations
    h4
      color: white
      font-size: 24px
      font-weight: 600
      margin-bottom: 24px
      
      @include mobile
        font-size: 20px
        margin-bottom: 16px
  
  &__loading,
  &__no-recommendations
    text-align: center
    padding: 48px 24px
    color: $gray-400
    font-size: 16px

// –ê–Ω–∏–º–∞—Ü–∏–∏
.fullscreen-enter-active,
.fullscreen-leave-active
  transition: all 0.3s ease

.fullscreen-enter-from,
.fullscreen-leave-to
  opacity: 0
</style>
```

---

## 3Ô∏è‚É£ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

### –§–∞–π–ª: `pages/index.vue`

```vue
<template>
  <div class="home-page">
    <!-- Hero —Å–µ–∫—Ü–∏—è -->
    <section class="home-page__hero">
      <div class="home-page__container">
        <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ SnapBoard</h1>
        <p>–í–∞—à–∞ –≤–∏–∑—É–∞–ª—å–Ω–∞—è –¥–æ—Å–∫–∞ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è</p>
      </div>
    </section>
    
    <!-- –ì–∞–ª–µ—Ä–µ—è —Å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–º —Å–∫—Ä–æ–ª–ª–æ–º -->
    <section class="home-page__gallery">
      <div class="home-page__container">
        <h2>{{ galleryTitle }}</h2>
        
        <!-- Masonry Grid -->
        <ImageMasonryGrid
          :images="displayedImages"
          :is-loading="isLoading && displayedImages.length === 0"
          @image-click="handleImageClick"
        />
        
        <!-- –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ -->
        <div v-if="hasActiveFilters && !isLoading && displayedImages.length === 0" class="home-page__no-results">
          <div class="home-page__no-results-icon">üîç</div>
          <h3>–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h3>
          <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞</p>
          <button class="home-page__clear-btn" @click="clearFilters">
            –°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
          </button>
        </div>
        
        <!-- Infinite Scroll Loader -->
        <InfiniteScrollLoadMore
          v-if="!hasActiveFilters"
          :is-loading="isLoading"
          :has-more="hasMore"
          :error="error"
          :item-count="items.length"
          @retry="retry"
          @sentinel-mounted="handleSentinelMounted"
        />
      </div>
    </section>
    
    <!-- –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä -->
    <ImageFullscreenModal
      :is-open="isModalOpen"
      :image="selectedImage!"
      :view-context="viewContext"
      :all-images="displayedImages"
      @close="closeModal"
      @next="nextImage"
      @prev="prevImage"
      @image-select="selectImage"
    />
  </div>
</template>

<script setup lang="ts">
import { ref, computed } from 'vue'
import { useInfiniteScroll } from '~/composables/useInfiniteScroll'
import { useSearch } from '~/composables/useSearch'
import type { Image, ImageViewContext } from '~/types/image'

// Infinite scroll
const {
  items,
  isLoading,
  hasMore,
  error,
  retry,
  sentinelRef
} = useInfiniteScroll({
  boardId: 'home',
  config: {
    pageSize: 12,
    threshold: 200,
    initialLoad: true
  }
})

// –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
const { filteredImages, hasActiveFilters, clearFilters } = useSearch()

// –û—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
const displayedImages = computed(() => {
  if (hasActiveFilters.value) {
    return filteredImages.value
  }
  return items.value
})

// –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≥–∞–ª–µ—Ä–µ–∏
const galleryTitle = computed(() => {
  if (hasActiveFilters.value) {
    return `–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ (${displayedImages.value.length})`
  }
  return '–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è'
})

// –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
const isModalOpen = ref(false)
const selectedImage = ref<Image | null>(null)
const selectedIndex = ref(0)

const viewContext = computed<ImageViewContext>(() => ({
  currentIndex: selectedIndex.value,
  totalImages: displayedImages.value.length,
  hasPrev: selectedIndex.value > 0,
  hasNext: selectedIndex.value < displayedImages.value.length - 1
}))

const handleSentinelMounted = (element: HTMLElement | null) => {
  sentinelRef.value = element
}

const handleImageClick = (image: Image) => {
  const index = displayedImages.value.findIndex(img => img.id === image.id)
  if (index !== -1) {
    selectedIndex.value = index
    selectedImage.value = image
    isModalOpen.value = true
  }
}

const closeModal = () => {
  isModalOpen.value = false
}

const nextImage = () => {
  if (selectedIndex.value < displayedImages.value.length - 1) {
    selectedIndex.value++
    selectedImage.value = displayedImages.value[selectedIndex.value]
  }
}

const prevImage = () => {
  if (selectedIndex.value > 0) {
    selectedIndex.value--
    selectedImage.value = displayedImages.value[selectedIndex.value]
  }
}

const selectImage = (image: Image) => {
  const index = displayedImages.value.findIndex(img => img.id === image.id)
  if (index !== -1) {
    selectedIndex.value = index
    selectedImage.value = image
  }
}
</script>

<!-- –°—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
```

---

## 4Ô∏è‚É£ Composable –¥–ª—è –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ (–µ—Å–ª–∏ –Ω–µ—Ç)

### –§–∞–π–ª: `composables/useFavorites.ts`

```typescript
import { ref, computed } from 'vue'

const favorites = ref<Set<string>>(new Set())

// –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ localStorage
if (typeof window !== 'undefined') {
  const saved = localStorage.getItem('snapboard_favorites')
  if (saved) {
    try {
      favorites.value = new Set(JSON.parse(saved))
    } catch (e) {
      console.error('Failed to parse favorites:', e)
    }
  }
}

export function useFavorites() {
  const isFavorite = (imageId: string) => {
    return favorites.value.has(imageId)
  }
  
  const toggleFavorite = (imageId: string) => {
    if (favorites.value.has(imageId)) {
      favorites.value.delete(imageId)
    } else {
      favorites.value.add(imageId)
    }
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
    if (typeof window !== 'undefined') {
      localStorage.setItem(
        'snapboard_favorites',
        JSON.stringify([...favorites.value])
      )
    }
  }
  
  const favoriteIds = computed(() => [...favorites.value])
  
  return {
    isFavorite,
    toggleFavorite,
    favoriteIds
  }
}
```

---

## üìÅ –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|------|-----------|
| `utils/gridConfig.ts` | –ë—Ä–µ–π–∫–ø–æ–∏–Ω—Ç—ã —Å–æ–≥–ª–∞—Å–Ω–æ variables.sass, 380px –¥–ª—è 2 –∫–æ–ª–æ–Ω–æ–∫ |
| `components/image/FullscreenModal.vue` | –ù–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ |
| `pages/index.vue` | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è FullscreenModal |
| `composables/useFavorites.ts` | –ù–æ–≤—ã–π composable –¥–ª—è –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ |

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

1. 2 –∫–æ–ª–æ–Ω–∫–∏ –ø—Ä–∏ —à–∏—Ä–∏–Ω–µ —ç–∫—Ä–∞–Ω–∞ < 380px
2. –ë—Ä–µ–π–∫–ø–æ–∏–Ω—Ç—ã –≤ gridConfig.ts —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç variables.sass (576, 768, 1024)
3. –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
4. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–Ω–∏–º–∞–µ—Ç –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å —ç–∫—Ä–∞–Ω–∞
5. –í–Ω–∏–∑—É –ø–∞–Ω–µ–ª—å —Å –∫–Ω–æ–ø–∫–∞–º–∏: –ò–∑–±—Ä–∞–Ω–Ω–æ–µ, –°–æ—Ö—Ä–∞–Ω–∏—Ç—å, –ü–æ–¥–µ–ª–∏—Ç—å—Å—è
6. –ü–æ–¥ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Å–µ–∫—Ü–∏—è "–ü–æ—Ö–æ–∂–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è" —Å MasonryGrid
7. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –æ—Å–Ω–æ–≤–∞–Ω—ã –Ω–∞ —Ç–µ–≥–∞—Ö –∏ –Ω–∞–∑–≤–∞–Ω–∏–∏ —Ç–µ–∫—É—â–µ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
8. –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Å—Ç—Ä–µ–ª–∫–∞–º–∏ (–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∏ –∫–Ω–æ–ø–∫–∏)
9. –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ Escape, –∫–ª–∏–∫—É –Ω–∞ —Ñ–æ–Ω –∏–ª–∏ –∫–Ω–æ–ø–∫—É ‚úï
10. –ù–µ—Ç TypeScript –æ—à–∏–±–æ–∫
